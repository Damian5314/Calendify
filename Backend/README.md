# Webdevelopment Starter Kit
This project contains a template to get started with.
The technical setup includes: 
- .NET
- Entity Framework Core
- Node.js
- Typescript
- React 
- Bootstrap CSS

The template has allready the following functionalities implemented: 
- A HomeController that serves the routes that renders the React application
- A pre-installed frontend template using React and Typescript
- A database model that will be installed in a SqlLite database

## Quick start up
Follow these stepps for the fastest way to run the StarterKit.

- Install .NET 8
- Install Node JS 16.20.2

### Backend

`dotnet restore`

`dotnet ef database update`

`dotnet watch run` 

Go to [localhost:5097](http://localhost:5097)

### Frontend
Open a new terminal 

Install yarn as global

`npm install --global yarn`

Go into the Frontend directory:

`cd Frontend`

`yarn install` or just `yarn`

`yarn watch`

### Add a new migration

Next up chose a practical case and add a new migrations

Go to the `DatabaseContext.cs` file.

There you will find two commented segments.

You can uncomment one of the two segments, depending on the case you want to build.

### Add a new migration

Install EF core (Entity Framework Core):

`dotnet tool install --global dotnet-ef`

`dotnet ef migrations add <Migration name>` 
(Give a name to identify the migration)

After every database change you will have to run the following command: 
`dotnet ef database update`



## Instalation stepps
These install stepps needs to be executed only once at the start, if you haven't done it 
allready on your PC.

### Install EF core
Run the follwoing commands to install Entity Framework core as a global tool.
https://learn.microsoft.com/en-us/ef/core/get-started/overview/install
- `dotnet add package Microsoft.EntityFrameworkCore.SqlServer`
- `dotnet tool install --global dotnet-ef`
- `dotnet add package Microsoft.EntityFrameworkCore.Design`
- Run `dotnet ef` to verify the installation

### Install Node.js
You can install Node js from the official node website. This project was setup with 
node version 16.20.2
https://nodejs.org/en 

It is recommended to make a habit of using NVM (Node version manager)
https://github.com/nvm-sh/nvm
This will allow you to switch easily between different Node versions. 
Especially if you have more projects on your PC, there comes a moment that you encounter 
a code base that uses an outdated Node version and the depencies have not been updated.

### Install SQllite 
https://learn.microsoft.com/en-us/ef/core/get-started/overview/first-app?tabs=netcore-cli
- `dotnet add package Microsoft.EntityFrameworkCore.Sqlite`

## Run the project
The following commands needs to be executed every time you want to run the project.

### Backend
- Run `dotnet ef database update` to run the database migrations. If you run this for the first time, the tool will create a local database (.sqlite) file for you. You only need to run this if you have database changes. 
- Run `dotnet watch run` to start the backend in watch mode. 
- The application will be available on [http://localhost:5097/](http://localhost:5097/)

### Frontend
- Go inside the `/Frontend/` directory `cd Frontend`
- Run `yarn install` or `npm install`
- `yarn watch` or `npm run watch` will build a development Javascript bundle in watch mode

## Adding a new database migrations
Whenever you make a change to the `DatabaseContext` you will need to add a new migration. 
All the database changes are being managed from the `/Migrations/` folder, the content of this folder is automatically generated. Do not edit this file by hand.
Entity Framework Core is used to map the C# classes to SQL tables. 

To add a new migration after a database change run the following command: 
`dotnet ef migrations add <Migration name>`

Inside the migrations folder you can allready find a migration called `InitialCreate` containing the creation of the Admin entity. 
The `DatabaseContext.cs` file contains two pre-configured databases for the practicall cases. You can uncomment one of them and add a new migration
to apply the model. Inside this file you will also find some data seeds that creates a couple of admin users with a password.

After every migration you will also need to run `dotnet ef database update`, this will apply the changes to the database.

